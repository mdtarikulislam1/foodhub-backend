model OrderItem {
    id String @id @default(uuid())

    orderId String
    order   Order  @relation(fields: [orderId], references: [id])

    productId String
    product   Product @relation(fields: [productId], references: [id])

    quantity Int
    price    Float
}

model Order {
    id String @id @default(uuid())

    userId String
    user   User   @relation(fields: [userId], references: [id])

    providerId String?
    provider   ProviderProfile? @relation("ProviderOrders", fields: [providerId], references: [id])

    status OrderStatus @default(PLACED)

    total       Float
    canCancel   Boolean   @default(true)
    cancelledAt DateTime?

    notes           String?
    deliveryAddress String
    phone           String

    items OrderItem[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    product   Product? @relation(fields: [productId], references: [id])
    productId String?

    @@index([status])
    @@index([providerId])
    @@index([createdAt])
    @@index([userId])

}

enum OrderStatus {
    PLACED
    PREPARING
    READY
    DELIVERED
    CANCELLED
}
