model Review {
  id          String       @id @default(uuid())
  userId      String
  productId   String
  description String       @db.VarChar(555)
  status      ReviewStatus @default(APPROVED)
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  parentId    String?
  parent      Review?      @relation("CommentReplies", fields: [parentId], references: [id], onDelete: Cascade)
  replies     Review[]     @relation("CommentReplies")
  product     Product      @relation(fields: [productId], references: [id])
  user        User         @relation(fields: [userId], references: [id])

  @@unique([userId, productId])
  @@index([productId, userId, parentId])
}

enum ReviewStatus {
  APPROVED
  REJECTED
}
