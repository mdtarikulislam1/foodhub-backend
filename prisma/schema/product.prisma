model Product {
  id          String        @id @default(uuid())
  name        String
  price       Float
  image       String
  discount    Int?          @default(0)
  isActive    Boolean       @default(true)
  description String?
  views       Int           @default(0)
  ordersCount Int           @default(0)
  categoryId  String
  providerId  String
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  cartItem    CartItem[]    @relation("cartItemToProduct")
  orderItem   OrderItem[]
  category    Category      @relation(fields: [categoryId], references: [id])
  provider    User          @relation(fields: [providerId], references: [id])
  review      Review[]
  stock       Stock[]
  diets       ProductDiet[]

  @@index([categoryId])
  @@index([providerId])
  @@index([isActive])
}

model Stock {
  id        String   @id @default(uuid())
  productId String
  quantity  Int      @default(0)
  warehouse String?
  batch     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  product   Product  @relation(fields: [productId], references: [id])

  @@index([productId])
}

model Category {
  id          String  @id @default(uuid())
  name        String  @unique @db.VarChar(100)
  slug        String  @unique @db.VarChar(100)
  image       String?
  description String? @db.VarChar(255)
  isActive    Boolean @default(true)

  orderCount Int?     @default(0)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  products Product[]

}

model Diet {
  id          String  @id @default(uuid())
  name        String  @unique
  slug        String  @unique
  isActive    Boolean @default(true)
  description String? @db.VarChar(255)

  products ProductDiet[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model ProductDiet {
  productId String
  dietId    String

  product Product @relation(fields: [productId], references: [id])
  diet    Diet    @relation(fields: [dietId], references: [id])

  @@id([productId, dietId])
  @@index([dietId])
}
